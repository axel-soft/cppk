#Область ОбработчикиСобытий

&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	ТекстСостояниеНачало = НСтр("ru = 'Выполняется восстановление поступивших обновлений задач.
		|Пожалуйста, подождите...'");
	Состояние(ТекстСостояниеНачало);
	
	ОбработкаКомандыНаСервере(ПараметрКоманды);
	
	ТекстСостояниеКонец = НСтр("ru = 'Выполнено восстановление поступивших обновлений задач.'");
	Состояние(ТекстСостояниеКонец);
	
	ОповеститьОбИзменении(Тип("ДокументСсылка.ДействиеЗадачи"));
	Оповестить("Запись_ДействиеЗадачи");
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ОбработкаКомандыНаСервере(Знач ПользователиДляВосстановления)
	
	Для Каждого ПользовательДляВосстановления Из ПользователиДляВосстановления Цикл
		РаботаСЗадачами.ВосстановитьПоступившиеОбновленияЗадач(ПользовательДляВосстановления);
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти