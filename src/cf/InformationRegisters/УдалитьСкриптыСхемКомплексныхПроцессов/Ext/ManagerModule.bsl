
#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

// Получает скрипт (выражение на встроенном языке) по схеме и идентификатору.
//
// Параметры:
//  Схема - СправочникСсылка.СхемыКомплексныхПроцессов - ссылка на схему, в которой
//          используется текущей скрипт.
//  ИдентификаторСкрипта - Уникальный Идентификатор - Идентификатор скрипта в разрезе схемы.
//
// Возвращаемое значение:
//  Строка - скрипт (выражение на встроенном языке).
//
Функция СкриптСхемы(Схема, ИдентификаторСкрипта) Экспорт
	
	УстановитьПривилегированныйРежим(Истина);
	
	Скрипт = "";
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	УдалитьСкриптыСхемКомплексныхПроцессов.Скрипт
		|ИЗ
		|	РегистрСведений.УдалитьСкриптыСхемКомплексныхПроцессов КАК УдалитьСкриптыСхемКомплексныхПроцессов
		|ГДЕ
		|	УдалитьСкриптыСхемКомплексныхПроцессов.Схема = &Схема
		|	И УдалитьСкриптыСхемКомплексныхПроцессов.ИдентификаторСкрипта = &ИдентификаторСкрипта";
	
	Запрос.УстановитьПараметр("Схема", Схема);
	Запрос.УстановитьПараметр("ИдентификаторСкрипта", ИдентификаторСкрипта);
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	Если Выборка.Следующий() Тогда
		Скрипт = Выборка.Скрипт;
	КонецЕсли;
	
	Возврат Скрипт;
	
КонецФункции

#КонецЕсли