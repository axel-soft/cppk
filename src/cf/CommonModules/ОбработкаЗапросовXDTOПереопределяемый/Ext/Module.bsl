///////////////////////////////////////////////////////////////////////////////////////////////////////
// Обработка запросов XDTO, переопределяемый
// Реализует расширяемый функционал веб-сервиса DMService
///////////////////////////////////////////////////////////////////////////////////////////////////////

#Область ПрограммныйИнтерфейс

// Дополняет таблицу соответствия поддерживаемых типов.
// Вызывается из ОбработкаЗапросовXDTO.СоответствиеТипов.
//
// Параметры:
//   Таблица - ТаблицаЗначений - неявно возвращаемое значение с колонками:
//     * ИмяXDTO - Строка - имя типа XDTO.
//     * ИмяДО - Строка - полное имя типа ДО.
//
Процедура ДополнитьСоответствиеТипов(Таблица) Экспорт
	
	
	
КонецПроцедуры

// Вызывается при заполнении объекта Документооборота по данным объекта XDTO.
//
// Параметры:
//   ОбъектДО - СправочникОбъект - заполняемый объект.
//   ОбъектXDTO - ОбъектXDTO - объект XDTO соответствующего типа. Источник данных заполнения.
//   ТипXDTOОбъекта - Строка - имя типа XDTO объекта, из которого требуется заполнить объект ДО.
//   СтандартнаяОбработка - Булево - признак отказа от стандартной обработки.
//
Процедура ПриЗаполненииДанныхОбъектаДО(ОбъектДО, ОбъектXDTO, ТипXDTOОбъекта, СтандартнаяОбработка) Экспорт
	
	
	
КонецПроцедуры

// Вызывается при заполнении соответствия имен свойств XDTO реквизитам поиска и позволяет доопределить его.
//
// Параметры:
//   Тип - Строка - имя типа XDTO.
//   Результат - Структура - где ключом является имя свойства XDTO, а значением имя реквизита.
//
Процедура ПриЗаполненииСоответствияСвойствXDTOРезультатамПоиска(Тип, Результат) Экспорт
	
	
	
КонецПроцедуры

// Дополнительная обработка сообщения XDTO.
// Вызывается из ОбработкаЗапросовXDTO.ОбработатьУниверсальноеСообщение перед основной обработкой.
//
// Параметры:
//   Сообщение - ОбъектXDTO - объект XDTO, потомок DMRequest.
//   Результат - ОбъектXDTO - объект XDTO, потомок DMResponse, если сообщение обработано.
//
Процедура ПриОбработкеУниверсальногоСообщения(Сообщение, Результат) Экспорт
	
	
	
КонецПроцедуры

// Определяет необходимость использования механизма обмена данными с интегрированными системами.
//
// Параметры:
//   Используется - Булево - неявно возвращаемое значение, указывает используется ли механизм обмена данными.
//
Процедура ПриОпределенииИспользованияОбменаДаннымиСИнтегрированнымиСистемами(Используется) Экспорт
	
	
	
КонецПроцедуры

// Вызывается при определении набора колонок, в котором задаются ключевые реквизиты объекта XDTO, которые могут
// потребоваться на стороне интегрированной системы при подборе или создании объектов ИС на основании объектов ДО.
//
// Параметры:
//   НаборКолонок - Массив из Строка - массив имен ключевых реквизитов объекта XDTO.
//   ОбъектДО - СправочникОбъект - объект Документооборота, источник данных.
//   ОбъектXDTO - ОбъектXDTO - объект XDTO который требуется дополнить.
//   ТипРеквизита - Тип - тип объекта Документооборота.
//   ТипXDTOОбъекта - Строка - имя типа XDTO объекта.
//
Процедура ПриОпределенииНабораКолонокДляЗаполненияКлючевыхРеквизитовОбъектаXDTO(НаборКолонок, ОбъектДО, ОбъектXDTO,
		ТипРеквизита, ТипXDTOОбъекта) Экспорт
	
	
	
КонецПроцедуры

// Вызывается при определении поля, где будет возвращаться наименование, для запроса на получение списка объектов.
//
// Параметры:
//   ПолеНаименования - Строка - неявно возвращаемое значение, указывает где брать наименование объектов.
//   ИмяТипа - Строка - полное имя типа Документооборота.
//
Процедура ПриОпределенииПоляНаименования(ПолеНаименования, ИмяТипа) Экспорт
	
	Если ИмяТипа = "Справочник.Сотрудники" Тогда
		ПолеНаименования = "Представление(ОбъектВыборки.Ссылка)";
	КонецЕсли;
	
КонецПроцедуры

// Вызывается при определении постфикса версии сервиса ДО.
//
// Параметры:
//   Постфикс - Строка - неявно возвращаемое значение, постфикса версии сервиса ДО.
//
Процедура ПриОпределенииПостфиксаВерсииСервиса(Постфикс) Экспорт
	
	Постфикс = ".CORP";
	
КонецПроцедуры

// Позволяет переопределить имя типа объекта веб-сервиса Документооборота.
//
// Параметры:
//   ИмяТипаXDTO - Строка - имя типа, которое требуется преобразовать.
//
Процедура ПриОпределенииТипаXDTO(ИмяТипаXDTO) Экспорт
	
	Если ИмяТипаXDTO = "DMInternalDocument"
			Или ИмяТипаXDTO = "DMIncomingDocument"
			Или ИмяТипаXDTO = "DMOutgoingDocument" Тогда
		ИмяТипаXDTO = "DMDocument";
		
	ИначеЕсли ИмяТипаXDTO = "DMInternalDocumentType"
			Или ИмяТипаXDTO = "DMIncomingDocumentType"
			Или ИмяТипаXDTO = "DMOutgoingDocumentType" Тогда
		ИмяТипаXDTO = "DMDocumentType";
		
	ИначеЕсли ИмяТипаXDTO = "DMInternalDocumentTemplate"
			Или ИмяТипаXDTO = "DMIncomingDocumentTemplate"
			Или ИмяТипаXDTO = "DMOutgoingDocumentTemplate" Тогда
		ИмяТипаXDTO = "DMDocumentTemplate";
		
	ИначеЕсли ИмяТипаXDTO = "DMInternalDocumentFolder" Тогда
		ИмяТипаXDTO = "DMDocumentFolder";
		
	КонецЕсли;
	
КонецПроцедуры

// Вызывается при поиске подходящего объекта Документооборота по объекту XDTO.
//
// Параметры:
//   ОбъектXDTO - ОбъектXDTO - объект XDTO соответствующего типа.
//   ТипXDTOОбъекта - Строка - имя типа XDTO объекта, который требуется найти.
//   ПолноеИмяТипаОбъектаДО - Строка - имя типа объекта ДО.
//   Владелец - СправочникСсылка - владелец объекта, который требуется найти.
//   Результат - ЛюбаяСсылка - найденный объект Документооборота.
//
Процедура ПриПоискеОбъектаДОПоСтандартнымПолямПоиска(ОбъектXDTO, ТипXDTOОбъекта, ПолноеИмяТипаОбъектаДО, Владелец,
		Результат) Экспорт
	
	
	
КонецПроцедуры

// Вызывается при заполнении объекта XDTO по данным объекта Документооборота.
//
// Параметры:
//   ОбъектДО - СправочникОбъект - объект Документооборота, источник данных.
//   ОбъектXDTO - ОбъектXDTO - объект XDTO соответствующего типа.
//   ТипXDTOОбъекта - Строка - имя типа XDTO объекта, который требуется получить.
//   НаборКолонок - Массив из Строка - массив имен реквизитов к заполнению.
//                - Неопределено - требование заполнить все реквизиты.
//   ИнтегрированнаяСистема - ПланОбменаСсылка.ИнтегрированныеСистемы - система, для которой предназначен объект.
//   ТолькоОсновныеРеквизиты - Булево - объект XDTO будет заполнен всеми реквизитами объекта ДО, без дополнительных
//     запросов к базе.
//   КешДанных - Структура - кеш данных, который требуется для ускорения работы различных механизмов.
//   СтандартнаяОбработка - Булево - признак отказа от стандартной обработки.
//
Процедура ПриПолученииДанныхОбъектаДО(ОбъектДО, ОбъектXDTO, ТипXDTOОбъекта, НаборКолонок, ИнтегрированнаяСистема,
		ТолькоОсновныеРеквизиты, КешДанных, СтандартнаяОбработка) Экспорт
	
	
	
КонецПроцедуры

// Вызывается при установке параметров сеанса.
//
// Параметры:
//   ИменаПараметровСеанса - Массив из Строка
//                         - Неопределено - имена параметров сеанса для инициализации.
//                                          Массив устанавливаемых идентификаторов параметров сеанса,
//                                          которые нужно инициализировать, если обработчик вызывается
//                                          перед использованием неинициализированных параметров сеанса.
//                                          Неопределено, если обработчик события вызывается системой при начале сеанса.
//
Процедура ПриУстановкеПараметровСеанса(ИменаПараметровСеанса) Экспорт
	
	Если ИменаПараметровСеанса = Неопределено
			Или ИменаПараметровСеанса.Найти("УзелИнтегрированнойСистемы") <> Неопределено Тогда
		ПараметрыСеанса.УзелИнтегрированнойСистемы = ПланыОбмена.ИнтегрированныеСистемы.ПустаяСсылка();
	КонецЕсли;

	Если ИменаПараметровСеанса = Неопределено
			Или ИменаПараметровСеанса.Найти("ВерсияБИД") <> Неопределено Тогда
		ПараметрыСеанса.ВерсияБИД = "";
	КонецЕсли;
	
КонецПроцедуры

// Вызывается при формировании текста ошибки получения ссылки на объект ДО по ObjectID.
//
// Параметры:
//   ТекстОшибки - Строка - текст сообщения об ошибке.
//
Процедура ПриФормированииТекстаОшибкиПолученияСсылкиПоObjectID(ТекстОшибки) Экспорт
	
	
	
КонецПроцедуры

#КонецОбласти