#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область СлужебныйПрограммныйИнтерфейс

// Вычисляет выражение условия и возвращает результат.
// 
// Параметры:
//  СкриптСхемы - СправочникСсылка.СкриптыСхемДляКомплексныхПроцессов
//  Процесс - БизнесПроцессОбъект.КомплексныйПроцесс
//
Процедура ВыполнитьСкриптСхемы(СкриптСхемы, Процесс) Экспорт
	
	Параметры = Новый Структура;
	Параметры.Вставить("ПроцессОбъект", Процесс);
	
	Выражение = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(СкриптСхемы, "Выражение");	
	ОбщегоНазначения.ВыполнитьВБезопасномРежиме(Выражение, Параметры);
		
КонецПроцедуры

// Возвращает скрипт схемы по хешу выражения.
// 
// Параметры:
//  ХешВыражения - Строка
// 
// Возвращаемое значение:
//  СправочникСсылка.СкриптыСхемДляКомплексныхПроцессов
//
Функция СкриптСхемыПоХешуВыражения(ХешВыражения) Экспорт
	
	Запрос = Новый Запрос;
	Запрос.Текст =
		"ВЫБРАТЬ ПЕРВЫЕ 1
		|	СкриптыСхемДляКомплексныхПроцессов.Ссылка
		|ИЗ
		|	Справочник.СкриптыСхемДляКомплексныхПроцессов КАК СкриптыСхемДляКомплексныхПроцессов
		|ГДЕ
		|	СкриптыСхемДляКомплексныхПроцессов.ХешВыражения = &ХешВыражения";
	Запрос.УстановитьПараметр("ХешВыражения", ХешВыражения);
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	Если Выборка.Следующий() Тогда
		Возврат Выборка.Ссылка;
	Иначе
		Возврат Справочники.СкриптыСхемДляКомплексныхПроцессов.ПустаяСсылка();
	КонецЕсли;
	
КонецФункции

// СтандартныеПодсистемы.ВерсионированиеОбъектов
// Определяет настройки объекта для подсистемы ВерсионированиеОбъектов.
//
// Параметры:
// Настройки - Структура - настройки подсистемы.
Процедура ПриОпределенииНастроекВерсионированияОбъектов(Настройки) Экспорт
	
КонецПроцедуры
// Конец СтандартныеПодсистемы.ВерсионированиеОбъектов
	
#КонецОбласти

#КонецЕсли