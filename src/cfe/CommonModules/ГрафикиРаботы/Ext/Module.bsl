
&ИзменениеИКонтроль("ПолучитьНачалоИОкончаниеРабочегоДня")
Функция ЦППК_ПолучитьНачалоИОкончаниеРабочегоДня(Дата, ГрафикРаботы)

	СтруктураВозврата = Новый Структура("НачалоДня, ОкончаниеДня", Дата(1,1,1), Дата(1,1,1));
	Если Не ЭтоРабочийДень(Дата, ГрафикРаботы) Тогда 
		Возврат СтруктураВозврата;
	КонецЕсли;	

	ОсобоеРабочееВремяГрафика = ГрафикРаботы.ОсобоеРабочееВремя.Выгрузить();
	НайденныеСтроки = ОсобоеРабочееВремяГрафика.НайтиСтроки(Новый Структура("РабочийДень", НачалоДня(Дата)));
	Если НайденныеСтроки.Количество() > 0 Тогда 
		ТаблНайденныеСтроки = Новый ТаблицаЗначений;
		ТаблНайденныеСтроки.Колонки.Добавить("ВремяНачала");
		ТаблНайденныеСтроки.Колонки.Добавить("ВремяОкончания");

		Для Каждого НайденнаяСтрока Из НайденныеСтроки Цикл
			НоваяСтрока = ТаблНайденныеСтроки.Добавить();
			НоваяСтрока.ВремяНачала = НайденнаяСтрока.ВремяНачала;
			НоваяСтрока.ВремяОкончания = НайденнаяСтрока.ВремяОкончания;
		КонецЦикла;	
	Иначе
		ТаблНайденныеСтроки = ГрафикРаботы.РабочееВремя.Выгрузить();
	КонецЕсли;	

	ТаблНайденныеСтроки.Сортировать("ВремяНачала Возр");
	СтруктураВозврата.НачалоДня = ТаблНайденныеСтроки[0].ВремяНачала;

	ТаблНайденныеСтроки.Сортировать("ВремяОкончания Убыв");
	СтруктураВозврата.ОкончаниеДня = ТаблНайденныеСтроки[0].ВремяОкончания;
	
	#Вставка
	//++AxelSoft Шарапова 30.10.2024 САНФ-029987
	ЦППК_ГраницаСрокаИсполнения = ЦППК_ОбщийМодульВызовСервера.ПолучитьГраницуВремениСрокаИсполнения();
	СтруктураВозврата.ОкончаниеДня = ЦППК_ГраницаСрокаИсполнения;
	//--AxelSoft Шарапова 30.10.2024 САНФ-029987
	#КонецВставки
	
	Возврат СтруктураВозврата;

КонецФункции

&Вместо("СформироватьТаблицуРабочегоВремени")
Функция ЦППК_СформироватьТаблицуРабочегоВремени(ГрафикРаботы, ДатаНачала, ДатаОкончания)
	// Вставить содержимое метода.
	
	//++AxelSoft Шарапова 29.04.2025 САНФ-033681
	Если ДатаНачала > ДатаОкончания 
		И НачалоДня(ДатаОкончания) <> Дата('00010101') Тогда
	
		НоваяДатаНачала = ДатаОкончания;
		ДатаОкончания = ДатаНачала;
		ДатаНачала = НоваяДатаНачала;
		
	КонецЕсли; 
	//--AxelSoft Шарапова 29.04.2025 САНФ-033681
	
	Результат = ПродолжитьВызов(ГрафикРаботы, ДатаНачала, ДатаОкончания);
	Возврат Результат; 
	
КонецФункции
