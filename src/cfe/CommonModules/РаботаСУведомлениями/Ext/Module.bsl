
&ИзменениеИКонтроль("СформироватьТекстИПояснениеОповещения")
Функция ЦППК_СформироватьТекстИПояснениеОповещения(
	ОбъектПодписки,
	ВидСобытия,
	ОбъектыУведомления,
	ПолучательУведомления,
	СпособУведомления,
	ДополнительныеОписания,
	ТемаУведомления,
	ТекстУведомления)
	
	ТекстИПояснениеОповещения = Новый Структура("ТекстОповещения, ПояснениеОповещения", "", "");
	
	КоличествоОбъектовУведомления = ОбъектыУведомления.Количество();
	Если КоличествоОбъектовУведомления = 0 Тогда
		Возврат ТекстИПояснениеОповещения;
	КонецЕсли;
	
	КодЯзыка = КодЯзыка(ПолучательУведомления);
	Если ВидСобытия = Справочники.ВидыБизнесСобытий.ВозобновлениеБизнесПроцесса Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Возобновлен %1 бизнес-процесс;;Возобновлено %1 бизнес-процесса;Возобновлено %1 бизнес-процессов;Возобновлено %1 бизнес-процесса'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Возобновлен бизнес-процесс'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ВыполнениеЗадачиПроцесса Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Выполнена %1 задача;;Выполнено %1 задачи;Выполнено %1 задач;Выполнено %1 задачи'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Выполнена задача'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ДобавлениеВКатегорию Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';%1 предмет добавлен в категорию;;%1 предмета добавлено в категорию;%1 предметов добавлено в категорию;%1 предмета добавлено в категорию'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Предмет добавлен в категорию'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ЗавершениеБизнесПроцесса Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Завершен %1 бизнес-процесс;;Завершено %1 бизнес-процесса;Завершено %1 бизнес-процессов;Завершено %1 бизнес-процесса'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Завершен бизнес-процесс'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ЗахватФайлаДляРедактирования Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Захвачен %1 файл для редактирования;;Захвачено %1 файла для редактирования;Захвачено %1 файлов для редактирования;Захвачено %1 файла для редактирования'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Захвачен файл для редактирования'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ИзменениеБрони Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Изменена %1 бронь;;Изменено %1 брони;Изменено %1 броней;Изменено %1 брони'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Изменена бронь'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ИзменениеДокумента Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Изменен %1 документ;;Изменено %1 документов;Изменено %1 документов;Изменено %1 документа'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Изменен документ'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ИзменениеЗначенияПоказателяПроцесса Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Изменилось значение %1 показателя процесса;;Изменилось значение %1 показателей процессов;Изменилось значение %1 показателей процессов;Изменилось значение %1 показателей процессов'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Изменилось значение показателя процесса'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ИзменениеМероприятия Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Изменено %1 мероприятие;;Изменено %1 мероприятия;Изменено %1 мероприятий;Изменено %1 мероприятия'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Изменено мероприятие'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ИзменениеОтсутствия Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Изменено %1 отсутствие;;Изменено %1 отсутствия;Изменено %1 отсутствий;Изменено %1 отсутствия'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Изменено отсутствие'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ИзменениеПроекта Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Изменен %1 проект;;Изменено %1 проекта;Изменено %1 проектов;Изменено %1 проекта'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Изменен проект'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ИзменениеПроектнойЗадачи Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Изменена %1 проектная задача;;Изменено %1 проектных задачи;Изменено %1 проектных задач;Изменено %1 проектных задачи'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Изменена проектная задача'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ИзменениеСоставаКомплекта Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Изменен состав %1 комплекта;;Изменен состав %1 комплектов;Изменен состав %1 комплектов;Изменен состав %1 комплектов'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Изменен состав комплекта'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ИзменениеФайла Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Изменен %1 файл;;Изменено %1 файла;Изменено %1 файлов;Изменено %1 файла'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Изменен файл'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.НазначениеОтветственного Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Вы назначены ответственным за %1 документ;;Вы назначены ответственным за %1 документа;Вы назначены ответственным за %1 документов;Вы назначены ответственным за %1 документа'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Вы назначены ответственным за документ'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ОсвобождениеФайла Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Освобожден %1 файл;;Освобождено %1 файла;Освобождено %1 файлов;Освобождено %1 файла'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Освобожден файл'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ОстановкаБизнесПроцесса Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Остановлен %1 бизнес-процесс;;Остановлено %1 бизнес-процесса;Остановлено %1 бизнес-процессов;Остановлено %1 бизнес-процесса'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Остановлен бизнес-процесс'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ПеререгистрацияДокумента Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Перерегистрирован %1 документ;;Перерегистрировано %1 документа;Перерегистрировано %1 документов;Перерегистрировано %1 документа'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Перерегистрирован документ'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ПеререгистрацияДокумента Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Перерегистрирован %1 документ;;Перерегистрировано %1 документа;Перерегистрировано %1 документов;Перерегистрировано %1 документа'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Перерегистрирован документ'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ПрерываниеБизнесПроцесса Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Прерван %1 бизнес-процесс;;Прервано %1 бизнес-процесса;Прервано %1 бизнес-процессов;Прервано %1 бизнес-процесса'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Прерван бизнес-процесс'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.РегистрацияДокумента Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Зарегистрирован %1 документ;;Зарегистрировано %1 документа;Зарегистрировано %1 документов;Зарегистрировано %1 документа'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Зарегистрирован документ'", КодЯзыка);
		КонецЕсли;

	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.СозданиеБрони Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Создана %1 бронь;;Создано %1 брони;Создано %1 броней;Создано %1 брони'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Создана бронь'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.СозданиеДокумента Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Создан %1 документ;;Создано %1 документа;Создано %1 документов;Создано %1 документа'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Создан документ'", КодЯзыка);
		КонецЕсли;
		
		ТекстИПояснениеОповещения.ПояснениеОповещения = ТемаУведомления;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.СозданиеКонтрагента Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Создан %1 контрагент;;Создано %1 контрагента;Создано %1 контрагентов;Создан %1 контрагента'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Создан контрагент'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.СозданиеМероприятия Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Создано %1 мероприятие;;Создано %1 мероприятия;Создано %1 мероприятий;Создано %1 мероприятия'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Создано мероприятие'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.СозданиеОтсутствия Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Создано %1 отсутствие;;Создано %1 отсутствия;Создано %1 отсутствий;Создано %1 отсутствия'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Создано отсутствие'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.СозданиеПроекта Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Создан %1 проект;;Создано %1 проекта;Создано %1 проектов;Создано %1 проекта'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Создан проект'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.СозданиеПроектнойЗадачи Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Создана %1 проектная задача;;Создано %1 проектных задачи;Создано %1 проектных задач;Создано %1 проектных задачи'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Создана проектная задача'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.СозданиеСообщения
		Или ВидСобытия = Перечисления.СобытияУведомлений.СозданиеТемыФорума Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';%1 новое сообщение в форуме;;%1 новых сообщения в форуме;%1 новых сообщений в форуме;%1 новых сообщения в форуме'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		ИначеЕсли ОбъектыУведомления[0].ПервоеСообщениеТемы Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Новая тема в форуме'", КодЯзыка);
			ТекстИПояснениеОповещения.ПояснениеОповещения = Строка(ОбъектыУведомления[0].ВладелецСообщения);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Новое сообщение в форуме'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.СозданиеФайла Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Создан %1 файл;;Создано %1 файла;Создано %1 файлов;Создано %1 файла'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Создан файл'", КодЯзыка);
		КонецЕсли;
		
		ТекстИПояснениеОповещения.ПояснениеОповещения = ТемаУведомления;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.СтартБизнесПроцесса Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Стартован %1 бизнес-процесс;;Стартовано %1 бизнес-процесса;Стартовано %1 бизнес-процессов;Стартовано %1 бизнес-процесса'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Стартован бизнес-процесс'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.УдалениеИзКатегории Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';%1 предмет удален из категории;;%1 предмета удалено из категории;%1 предметов удалено из категории;%1 предмета удалено из категории'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Предмет удален из категории'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ВыполнениеМоейЗадачи Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Выполнена %1 задача, назначенная вам;;Выполнено %1 задачи, назначенных вам;Выполнено %1 задач, назначенных вам;Выполнено %1 задачи, назначенных вам'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Выполнена задача, назначенная вам'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ЗакончилсяСрокДействияДокумента Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Закончился срок действия %1 документа;;Закончился срок действия %1 документов;Закончился срок действия %1 документов;Закончился срок действия %1 документов'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Закончился срок действия документа'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ПеренаправлениеМоейЗадачи Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Перенаправлена %1 задача, назначенная вам;;Перенаправлено %1 задачи, назначенных вам;Перенаправлено %1 задач, назначенных вам;Перенаправлена %1 задачи, назначенных вам'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Перенаправлена задача, назначенная вам'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ПодошелСрокДействияДокумента Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Истекает срок действия %1 документа;;Истекает срок действия %1 документов;Истекает срок действия %1 документов;Истекает срок действия %1 документов'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Истекает срок действия документа'", КодЯзыка);
		КонецЕсли;
		
#Вставка
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ПодошелСрокИсполненияДокумента Тогда

		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
			СтрокаСЧислом(
			НСтр("ru = ';Истекает срок направления договора Контрагенту %1;;Истекает срок направления договора Контрагенту %1;Истекает срок направления договора Контрагенту %1;Истекает срок направления договора Контрагенту %1'", КодЯзыка),
			КоличествоОбъектовУведомления,
			ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Истекает срок направления договора Контрагенту'", КодЯзыка);
		КонецЕсли;

	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ПодошелСрокЗаключенияДоговораСКонтрагентов Тогда

		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
			СтрокаСЧислом(
			НСтр("ru = ';Подходит крайний срок заключения Договора с Контрагентом %1;;Подходит крайний срок заключения Договора с Контрагентом %1;Подходит крайний срок заключения Договора с Контрагентом %1;Подходит крайний срок заключения Договора с Контрагентом %1'", КодЯзыка),
			КоличествоОбъектовУведомления,
			ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Подходит крайний срок заключения Договора с Контрагентом'", КодЯзыка);
		КонецЕсли;

#КонецВставки
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ПодошелСрокКонтрольнойТочки Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Истекает срок %1 контрольной точки;;Истекает срок %1 контрольных точек;Истекает срок %1 контрольных точек;Истекает срок %1 контрольных точек'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Истекает срок контрольной точки'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ПодошелСрокКонтроля Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Истекает срок %1 контроля;;Истекает срок %1 контролей;Истекает срок %1 контролей;Истекает срок %1 контролей'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Истекает срок контроля'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ПросроченаКонтрольнаяТочка Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Просрочена %1 контрольная точка;;Просрочено %1 контрольных точки;Просрочено %1 контрольных точек;Просрочено %1 контрольных точки'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Просрочена контрольная точка'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ПросроченаОценкаКонтрольнойТочки Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Обновите недельную оценку %1 контрольной точки;;Обновите недельную оценку %1 контрольных точек;Обновите недельную оценку %1 контрольных точек;Обновите недельную оценку %1 контрольных точек'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Обновите недельную оценку контрольной точки'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ПросроченКонтроль Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Просрочен %1 контроль;;Просрочено %1 контроля;Просрочено %1 контролей;Просрочено %1 контроля'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Просрочен контроль'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.УведомлениеПрограммы Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Уведомление о %1 ошибке;;Уведомление о %1 ошибках;Уведомление о %1 ошибках;Уведомление о %1 ошибках'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Уведомление об ошибке'", КодЯзыка);
		КонецЕсли;
		
		ТекстИПояснениеОповещения.ПояснениеОповещения = ТекстУведомления;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.НапоминаниеОЗамереТемпературы Тогда
		
		ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Контроль самочувствия'", КодЯзыка);
		Если СтрЧислоСтрок(ТекстУведомления) >= 2 Тогда
			ТекстИПояснениеОповещения.ПояснениеОповещения =
				СтрПолучитьСтроку(ТекстУведомления, 1)
				+ Символы.ПС
				+ СтрПолучитьСтроку(ТекстУведомления, 2);
		Иначе
			ТекстИПояснениеОповещения.ПояснениеОповещения = ТекстУведомления;
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ПоявлениеЗамераСПовышеннойТемпературой Тогда
		
		ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Внимание! Повышенная температура'", КодЯзыка);
		ТекстИПояснениеОповещения.ПояснениеОповещения = СтрПолучитьСтроку(ТекстУведомления, 1);
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ОтчетОЗамерахТемпературы Тогда
		
		ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Контроль самочувствия'", КодЯзыка);
		Если СтрЧислоСтрок(ТекстУведомления) >= 3 Тогда
			ТекстИПояснениеОповещения.ПояснениеОповещения =
				СтрПолучитьСтроку(ТекстУведомления, 1)
				+ Символы.ПС
				+ СтрПолучитьСтроку(ТекстУведомления, 2)
				+ Символы.ПС
				+ СтрПолучитьСтроку(ТекстУведомления, 3);
		Иначе
			ТекстИПояснениеОповещения.ПояснениеОповещения = ТекстУведомления;
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ПодошелСрокЗаявкиНаОплату Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Истекает срок %1 заявки на оплату;;Истекает срок %1 заявок на оплату;Истекает срок %1 заявок на оплату;Истекает срок %1 заявок на оплату'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Истекает срок заявки на оплату'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ОтсутствуетАвансовыйОтчет Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Отсутствует авансовый отчет по %1 заявке на оплату;;Отсутствует авансовый отчет по %1 заявкам на оплату;Отсутствует авансовый отчет по %1 заявкам на оплату;Отсутствует авансовый отчет по %1 заявкам на оплату'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Отсутствует авансовый отчет по заявке на оплату'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ОтсутствуетОригинал Тогда
		
		ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'К документам не приложены оригиналы'", КодЯзыка);

	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ОбработкиНаПаузе Тогда
		
		ТекстИПояснениеОповещения.ТекстОповещения = ТемаУведомления;
		ТекстИПояснениеОповещения.ПояснениеОповещения = НСтр("ru = 'Возможно, пора продолжить обработку'", КодЯзыка);

	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ЭДОДокументАннулирован Тогда
		
		ТекстИПояснениеОповещения.ТекстОповещения = ТемаУведомления;
		ТекстИПояснениеОповещения.ПояснениеОповещения = "";

	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ЭДОДокументОтклонен Тогда
		
		ТекстИПояснениеОповещения.ТекстОповещения = ТемаУведомления;
		ТекстИПояснениеОповещения.ПояснениеОповещения = "";

	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ЭДОТребуетсяПодтверждениеАннулирования Тогда
		
		ТекстИПояснениеОповещения.ТекстОповещения = ТемаУведомления;
		ТекстИПояснениеОповещения.ПояснениеОповещения = "";
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.НоваяЗадача Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';%1 новая задача;;%1 новых задачи;%1 новых задач;%1 новых задачи'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Новая задача'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ОтменаЗадачи Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Отменена %1 задача;;Отменено %1 задачи;Отменено %1 задач;Отменено %1 задачи'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Отменена задача'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ОткладываниеЗадачи Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Отложена %1 задача;;Отложено %1 задачи;Отложено %1 задач;Отложено %1 задачи'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Отложена задача'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ПередачаЗадачОтИсполнителя Тогда
		
		ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Переданы задачи'", КодЯзыка);
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.СнятиеЗадачИсполнителя Тогда
		
		ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Сняты задачи'", КодЯзыка);
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ОтменаВыполненияЗадачи Тогда
		
		ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Отменено выполнение задачи'", КодЯзыка);
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ОстановкаОбработки Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Остановлена %1 обработка;;Остановлено %1 обработки;Остановлено %1 обработок;Остановлено %1 обработки'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Остановлена обработка'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.МероприятияИзменениеПриглашения Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Изменено %1 приглашение;;Изменено %1 приглашения;Изменено %1 приглашений;Изменено %1 приглашения'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Изменено приглашение'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.МероприятияОтклоненоПриглашение Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Отклонено %1 приглашение;;Отклонено %1 приглашения;Отклонено %1 приглашений;Отклонено %1 приглашения'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ОбъектУведомления = ОбъектыУведомления[0];
			ДополнительноеОписание = ДополнительныеОписания[ОбъектУведомления];
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Отклонено приглашение'", КодЯзыка);
			ТекстИПояснениеОповещения.ПояснениеОповещения = СтрШаблон(
				НСтр("ru = '%1 отклонил приглашение на %2'", КодЯзыка),
				ДополнительноеОписание,
				УправлениеМероприятиями.РасширенноеПредставлениеСДатой(ОбъектыУведомления[0]));
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.МероприятияОтменаПриглашения Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Отменено %1 приглашение;;Отменено %1 приглашения;Отменено %1 приглашений;Отменено %1 приглашения'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Отменено приглашение'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.МероприятияПриглашение Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';%1 приглашение;;%1 приглашения;%1 приглашений;%1 приглашения'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Приглашение'", КодЯзыка);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.МероприятияПринятоПриглашение Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = 
				СтрокаСЧислом(
					НСтр("ru = ';Принято %1 приглашение;;Принято %1 приглашения;Принято %1 приглашений;Принято %1 приглашения'", КодЯзыка),
					КоличествоОбъектовУведомления,
					ВидЧисловогоЗначения.Количественное);
		Иначе
			ОбъектУведомления = ОбъектыУведомления[0];
			ДополнительноеОписание = ДополнительныеОписания[ОбъектУведомления];
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Принято приглашение'", КодЯзыка);
			ТекстИПояснениеОповещения.ПояснениеОповещения = СтрШаблон(
				НСтр("ru = '%1 принял приглашение на %2'", КодЯзыка),
				ДополнительноеОписание,
				УправлениеМероприятиями.РасширенноеПредставлениеСДатой(ОбъектыУведомления[0]));
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ИзменениеЗадачи Тогда
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Изменены задачи'", КодЯзыка);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Изменена задача'", КодЯзыка);
			ТекстИПояснениеОповещения.ПояснениеОповещения = ТемаУведомления;
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ОшибкаВДокументахПереданныхВАрхив Тогда 
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = СтрШаблон(
				НСтр("ru = 'Ошибка в документах, переданных в 1С:Архив (%1)'", КодЯзыка),
				КоличествоОбъектовУведомления);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Ошибка в документе, переданном в 1С:Архив'", КодЯзыка);			
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Справочники.ВидыБизнесСобытий.ПринятиеДокументовВАрхив Тогда 
		
		Если КоличествоОбъектовУведомления > 1 Тогда
			ТекстИПояснениеОповещения.ТекстОповещения = СтрШаблон(
				НСтр("ru = 'Документы приняты в 1С:Архив (%1)'", КодЯзыка),
				КоличествоОбъектовУведомления);
		Иначе
			ТекстИПояснениеОповещения.ТекстОповещения = НСтр("ru = 'Документ принят в 1С:Архив'", КодЯзыка);
			ТекстИПояснениеОповещения.ПояснениеОповещения = Строка(ОбъектыУведомления[0]);
		КонецЕсли;
		
	ИначеЕсли ВидСобытия = Перечисления.СобытияУведомлений.ЭДОДокументИсправлен Тогда
		
		ТекстИПояснениеОповещения.ТекстОповещения = ТемаУведомления;
		ТекстИПояснениеОповещения.ПояснениеОповещения = "";
		
	Иначе
		
		ТекстИПояснениеОповещения.ТекстОповещения = Строка(ВидСобытия);
		ТекстИПояснениеОповещения.ПояснениеОповещения = ТемаУведомления;
		
	КонецЕсли;
	
	// Если есть текст оповещения, но нет пояснения - заполним пояснение по умолчанию, из представления объектов уведомления.
	Если ЗначениеЗаполнено(ТекстИПояснениеОповещения.ТекстОповещения)
		И Не ЗначениеЗаполнено(ТекстИПояснениеОповещения.ПояснениеОповещения) Тогда
		
		КоличествоОтображаемыхСтрокПояснения = 3;
		Если КоличествоОбъектовУведомления > КоличествоОтображаемыхСтрокПояснения Тогда
			КоличествоОтображаемыхОбъектов = КоличествоОтображаемыхСтрокПояснения - 1;
		Иначе
			КоличествоОтображаемыхОбъектов = КоличествоОбъектовУведомления;
		КонецЕсли;
		
		МассивПояснениеОповещения = Новый Массив;
		Для Каждого ОбъектУведомления Из ОбъектыУведомления Цикл
			
			Если МассивПояснениеОповещения.Количество() >= КоличествоОтображаемыхОбъектов Тогда
				Прервать;
			КонецЕсли;
			
			МассивПояснениеОповещения.Добавить(Строка(ОбъектУведомления));
			
		КонецЦикла;
		
		Если КоличествоОбъектовУведомления > КоличествоОтображаемыхОбъектов Тогда
			ТекстИДругиеОбъекты = СтрШаблон(НСтр("ru = 'и другие (всего %1)'"), КоличествоОбъектовУведомления);
			МассивПояснениеОповещения.Добавить(ТекстИДругиеОбъекты);
		КонецЕсли;
		
		ТекстИПояснениеОповещения.ПояснениеОповещения = СтрСоединить(МассивПояснениеОповещения, Символы.ПС);
		
	КонецЕсли;
	
	Возврат ТекстИПояснениеОповещения;
	
КонецФункции

&ИзменениеИКонтроль("ПолучитьНавигационнуюСсылкуУведомления")
Функция ЦППК_ПолучитьНавигационнуюСсылкуУведомления(Объект, ПредставлениеОбъекта = "") Экспорт
	
	УстановитьПривилегированныйРежим(Истина);
	
	ВнутренняяНавигационнаяСсылка = ПолучитьНавигационнуюСсылку(Объект);
	
	АдресПубликацииНаВебСервере = РаботаСУведомлениямиПовтИсп.АдресПубликацииНаВебСервере();
	Если ЗначениеЗаполнено(АдресПубликацииНаВебСервере) Тогда
		Если Прав(АдресПубликацииНаВебСервере, 2) = "/#"
			Или Прав(АдресПубликацииНаВебСервере, 1) = "#" Тогда
			// Адрес уже корректный
		ИначеЕсли Прав(АдресПубликацииНаВебСервере, 1) = "/" Тогда
			АдресПубликацииНаВебСервере = АдресПубликацииНаВебСервере + "#";
		Иначе
			АдресПубликацииНаВебСервере = АдресПубликацииНаВебСервере + "/#";
		КонецЕсли;
		ПрефиксСсылки = АдресПубликацииНаВебСервере;
	Иначе
		ПрефиксСсылки = "v8doc:";
	КонецЕсли;
	
	НавигационнаяСсылка = ПрефиксСсылки + ВнутренняяНавигационнаяСсылка;
	
	КодированнаяСсылка = КодироватьСтроку(НавигационнаяСсылка, СпособКодированияСтроки.URLВКодировкеURL);
	Если ЗначениеЗаполнено(ПредставлениеОбъекта) Тогда
		ПредставлениеСсылки = ПредставлениеОбъекта;
	Иначе
		ПредставлениеСсылки = Строка(Объект);
	КонецЕсли;
#Удаление
	НавигационнаяСсылкаУведомления = СтрШаблон(
		"<a href=%1>%2</a>",
		КодированнаяСсылка,
		ПредставлениеСсылки);
#КонецУдаления
#Вставка
	НавигационнаяСсылкаУведомления = СтрШаблон(
		"<font color=#0000ff>%1</a>",
		ВнутренняяНавигационнаяСсылка);
#КонецВставки
	
	Возврат НавигационнаяСсылкаУведомления;
	
КонецФункции

&ИзменениеИКонтроль("УведомлениеПоПочтеОтправлено")
Функция ЦППК_УведомлениеПоПочтеОтправлено(СформированноеУведомление, Соединение)

	АдресаЭлектроннойПочты = РегистрыСведений.СпособыУведомленияПользователей.ПолучитьСпособУведомленияПользователя(
			СформированноеУведомление.Пользователь, Перечисления.СпособыУведомления.ПоПочте);
	Если АдресаЭлектроннойПочты.Количество() = 0 Тогда
		ТекстОшибки = СтрШаблон(
			НСтр("ru = 'Уведомление не отправлено, так как не указан почтовый адрес у пользователя %1.'",
			ОбщегоНазначения.КодОсновногоЯзыка()), Строка(СформированноеУведомление.Пользователь));
		ЗаписьЖурналаРегистрации(
			СобытиеЖурналаРегистрации(), УровеньЖурналаРегистрации.Предупреждение, , , ТекстОшибки);
		Возврат Ложь;
	КонецЕсли;
	
	// Формирование массива вложений.
	Вложения = Новый Массив;
	Если ЗначениеЗаполнено(СформированноеУведомление.Файлы) Тогда
		Для Каждого Вложение Из СформированноеУведомление.Файлы Цикл
			
			Попытка
				
				ДвоичныеДанныеФайла =
					РаботаСФайламиВызовСервера.ПолучитьДвоичныеДанныеФайла(Вложение.Ссылка);
				
			Исключение
				
				// Может быть ошибка "Файл не найден в хранилище файлов" или другая ошибка.
				// Проблему регистрируем, но работу не блокируем.
				ТекстОшибки = СтрШаблон(
					НСтр("ru = 'Ошибка при формировании файлов почтового уведомления: %1'", ОбщегоНазначения.КодОсновногоЯзыка()),
					ПодробноеПредставлениеОшибки(ИнформацияОбОшибке()));
				ЗаписьЖурналаРегистрации(
					СобытиеЖурналаРегистрации(),
					УровеньЖурналаРегистрации.Ошибка,,,
					ТекстОшибки);
				
				Продолжить;
				
			КонецПопытки;
			
			СтруктураВложения = Новый Структура;
			СтруктураВложения.Вставить("Данные", ДвоичныеДанныеФайла);
			СтруктураВложения.Вставить("Имя", Вложение.ИмяФайла);
			СтруктураВложения.Вставить("Идентификатор", Неопределено);
			Вложения.Добавить(СтруктураВложения);
			
		КонецЦикла;
	КонецЕсли;

	Для Каждого ПочтовыйАдресПолучателя Из АдресаЭлектроннойПочты Цикл
		#Вставка
			// Пауза при отправке почтовых сообщений, для устранения ошибки почтового сервера
			// SMTP error code 421 4.4.2 Message submission rate for this client has exceeded the configured limit
			ОбщегоНазначенияБТС.Пауза(3);
		#КонецВставки
		Попытка

			ВидМаршрутизации = ВстроеннаяПочтаСервер.ПолучитьВидМаршрутизацииПоАдресу(ПочтовыйАдресПолучателя);
			Если ВидМаршрутизации = Перечисления.ВидыМаршрутизацииПисем.Внешняя Тогда

				ПараметрыПисьма = Новый Структура;
				ПараметрыПисьма.Вставить("Тема", СформированноеУведомление.ТемаУведомления);
				ПараметрыПисьма.Вставить("Текст", ТекстУведомленияВHTML(СформированноеУведомление.ТекстУведомления));
				ПараметрыПисьма.Вставить("Кому", ПочтовыйАдресПолучателя);
				ПараметрыПисьма.Вставить("ТипТекста", Перечисления.ТипыТекстовПочтовыхСообщений.HTML);

				Если ЗначениеЗаполнено(Вложения) Тогда
					ПараметрыПисьма.Вставить("Вложения", Новый Массив);
					Для Каждого Вложение Из Вложения Цикл
						СтруктураВложения = Новый Структура("Адрес, ИмяФайла");
						СтруктураВложения.Адрес = Вложение.Данные;
						СтруктураВложения.ИмяФайла = Вложение.Имя;
						ПараметрыПисьма.Вложения.Добавить(СтруктураВложения);
					КонецЦикла;
				КонецЕсли;

				СообщениеОбОшибке = "";
				Если Соединение = Неопределено Тогда
					Соединение = СоединениеСПочтовымСервером();
				КонецЕсли;
				УведомлениеОтправлено = ЛегкаяПочтаСервер.ОтправитьИнтернетПочта(
					ПараметрыПисьма, УчетнаяЗаписьДляРассылки(), , СообщениеОбОшибке, Соединение);
				Если Не УведомлениеОтправлено Тогда
					ВызватьИсключение СообщениеОбОшибке;
				КонецЕсли;

			ИначеЕсли ВидМаршрутизации = Перечисления.ВидыМаршрутизацииПисем.Внутренняя Тогда

				УчетныеЗаписиПолучателя = ВстроеннаяПочтаСервер.ПолучитьУчетныеЗаписиПоАдресу(ПочтовыйАдресПолучателя,
					Истина);
				Если УчетныеЗаписиПолучателя.Количество() = 0 Тогда
					ВызватьИсключение НСтр("ru = 'Неверный вид маршрутизации письма. Обратитесь к Администратору.'",
						ОбщегоНазначения.КодОсновногоЯзыка());
				КонецЕсли;

				Предметы = Новый Массив;
				Для Каждого Уведомление Из СформированноеУведомление.Уведомления Цикл

					Если Предметы.Найти(Уведомление.Объект) = Неопределено Тогда
						Предметы.Добавить(Уведомление.Объект);
					КонецЕсли;

				КонецЦикла;

				Для Каждого УчетнаяЗаписьПолучателя Из УчетныеЗаписиПолучателя Цикл

					ВходящееПисьмоОбъект = Документы.ВходящееПисьмо.СоздатьДокумент();

					Если Предметы.Количество() = 1 Тогда
						Предмет = Предметы[0];
						Если ЗначениеЗаполнено(Предмет)
							И ВстроеннаяПочтаСервер.ДоступенПоПравамОтветственнымУчетнойЗаписи(Предмет,
							УчетнаяЗаписьПолучателя) Тогда
							ВходящееПисьмоОбъект.Предмет = Предмет;
						КонецЕсли;
					КонецЕсли;

					Сообщение = Почта.СформироватьСтруктуруПочтовогоСообщения();

					Сообщение.Тема = СформированноеУведомление.ТемаУведомления;

					ДанныеУчетнойЗаписи = Почта.ПолучитьДанныеУчетнойЗаписи(УчетнаяЗаписьПолучателя);
					СтруктураПочтовогоАдреса = Новый Структура;
					СтруктураПочтовогоАдреса.Вставить("Адрес", ДанныеУчетнойЗаписи.АдресЭлектроннойПочты);
					СтруктураПочтовогоАдреса.Вставить("ОтображаемоеИмя", ДанныеУчетнойЗаписи.ОтображаемоеИмя);
					Сообщение.Получатели.Добавить(СтруктураПочтовогоАдреса);

					УчетнаяЗаписьОтправителя = ПредопределенноеЗначение(
						"Справочник.УчетныеЗаписиЭлектроннойПочты.СистемнаяУчетнаяЗаписьЭлектроннойПочты");
					ДанныеУчетнойЗаписи = Почта.ПолучитьДанныеУчетнойЗаписи(УчетнаяЗаписьОтправителя);
					СтруктураПочтовогоАдреса = Новый Структура;
					СтруктураПочтовогоАдреса.Вставить("Адрес", ДанныеУчетнойЗаписи.АдресЭлектроннойПочты);
					СтруктураПочтовогоАдреса.Вставить("ОтображаемоеИмя", ДанныеУчетнойЗаписи.ОтображаемоеИмя);
					Сообщение.Отправитель = СтруктураПочтовогоАдреса;
					Сообщение.ИмяОтправителя = ДанныеУчетнойЗаписи.ПредставлениеАдресаЭлектроннойПочты;

					ДатаСообщения = ТекущаяДатаСеанса();
					Сообщение.ДатаОтправки = ДатаСообщения;
					Сообщение.ДатаПолучения = ДатаСообщения;

					ИдентификаторСообщения = Новый УникальныйИдентификатор;
					Сообщение.ИдентификаторСообщения = Строка(ИдентификаторСообщения);

					СтруктураТекста = Новый Структура;
					СтруктураТекста.Вставить("ТипТекста", Перечисления.ТипыТекстовПочтовыхСообщений.HTML);
					СтруктураТекста.Вставить("Текст", ТекстУведомленияВHTML(СформированноеУведомление.ТекстУведомления));
					СтруктураТекста.Вставить("Кодировка", "");
					Сообщение.Тексты.Добавить(СтруктураТекста);

					Сообщение.Размер = ВстроеннаяПочтаСервер.ВычислитьРазмерПочтовогоСообщения(Сообщение);

					Сообщение.Вложения = Вложения;

					ВстроеннаяПочтаСервер.ЗаполнитьВходящееПисьмоПриВнутреннейМаршрутизации(ВходящееПисьмоОбъект,
						Сообщение, УчетнаяЗаписьПолучателя);

				КонецЦикла;

			КонецЕсли;

		Исключение
			ТекстОшибки = СтрШаблон(
					НСтр("ru = 'Ошибка при отправке уведомления по почте: %1'", ОбщегоНазначения.КодОсновногоЯзыка()),
				ПодробноеПредставлениеОшибки(ИнформацияОбОшибке()));
			ЗаписьЖурналаРегистрации(
				СобытиеЖурналаРегистрации(), УровеньЖурналаРегистрации.Ошибка, , , ТекстОшибки);
			ЗакрытьСоединениеСПочтовымСервером(Соединение);
			Возврат Ложь;
		КонецПопытки;

		ЗаписьЖурналаРегистрации(
			СобытиеЖурналаРегистрации(), УровеньЖурналаРегистрации.Информация, , , СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
				НСтр("ru = 'Уведомление успешно отправлено на адрес %1 (вид маршрутизации - %2).'",
			ОбщегоНазначения.КодОсновногоЯзыка()), ПочтовыйАдресПолучателя, НРег(ВидМаршрутизации)));

	КонецЦикла;

	Возврат Истина;

КонецФункции